{"version":3,"file":"vi-star.esm.js","sources":["../src/star.vue","../index.js"],"sourcesContent":["<template>\r\n  <div class=\"universe-bg\" ref=\"universeDiv\">\r\n    <canvas ref=\"canvas\" :width=\"canvasWidth\" :height=\"canvasHeight\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  //外部可以看情况传入  宽、高、透明度、层级\r\n  props: {\r\n    width: {\r\n      type: Number, // 数据类型为数组\r\n      required: false\r\n      // default: window.innerWidth // 设置默认值为\r\n    },\r\n    height: {\r\n      type: Number, // 数据类型为数组\r\n      required: false // 传递\r\n      // default: window.innerHeight // 设置默认值为\r\n    },\r\n    // 透明度\r\n    opacity: {\r\n      type: Number, // 数据类型为数组\r\n      required: false, // 传递\r\n      default: 0.4 // 设置默认值为\r\n    },\r\n    // z-index\r\n    zIndex: {\r\n      type: Number, // 数据类型为数组\r\n      required: false, // 传递\r\n      default: -1 // 设置默认值为-1\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      canvasWidth: '',\r\n      canvasHeight: ''\r\n    }\r\n  },\r\n  created() {\r\n    this.canvasWidth = this.width || window.innerWidth //这是canvas自带的宽高\r\n    this.canvasHeight = this.height || window.innerHeight\r\n  },\r\n  mounted() {\r\n    this.$refs.universeDiv.style.opacity = this.opacity\r\n    this.$refs.universeDiv.style['z-index'] = this.zIndex // 设置新的z-index值\r\n\r\n    const canvas = this.$refs.canvas\r\n    const ctx = canvas.getContext('2d')\r\n    const w = canvas.width\r\n    const h = canvas.height\r\n    const hue = 217\r\n    const stars = []\r\n    let count = 0\r\n    const maxStars = 1300\r\n\r\n    const canvas2 = document.createElement('canvas')\r\n    const ctx2 = canvas2.getContext('2d')\r\n    canvas2.width = 100\r\n    canvas2.height = 100\r\n    const half = canvas2.width / 2\r\n    const gradient2 = ctx2.createRadialGradient(half, half, 0, half, half, half)\r\n    gradient2.addColorStop(0.025, '#CCC')\r\n    gradient2.addColorStop(0.1, `hsl(${hue}, 61%, 33%)`)\r\n    gradient2.addColorStop(0.25, `hsl(${hue}, 64%, 6%)`)\r\n    gradient2.addColorStop(1, 'transparent')\r\n\r\n    ctx2.fillStyle = gradient2\r\n    ctx2.beginPath()\r\n    ctx2.arc(half, half, half, 0, Math.PI * 2)\r\n    ctx2.fill()\r\n\r\n    function random(min, max) {\r\n      if (arguments.length < 2) {\r\n        max = min\r\n        min = 0\r\n      }\r\n\r\n      if (min > max) {\r\n        let hold = max\r\n        max = min\r\n        min = hold\r\n      }\r\n\r\n      return Math.floor(Math.random() * (max - min + 1)) + min\r\n    }\r\n\r\n    function maxOrbit(x, y) {\r\n      const max = Math.max(x, y)\r\n      const diameter = Math.round(Math.sqrt(max * max + max * max))\r\n      return diameter / 2\r\n    }\r\n\r\n    const Star = function () {\r\n      this.orbitRadius = random(maxOrbit(w, h))\r\n      this.radius = random(60, this.orbitRadius) / 8\r\n      this.orbitX = w / 2\r\n      this.orbitY = h / 2\r\n      this.timePassed = random(0, maxStars)\r\n      this.speed = random(this.orbitRadius) / 1000000\r\n      this.alpha = random(2, 10) / 1000\r\n\r\n      count++\r\n      stars[count] = this\r\n    }\r\n\r\n    Star.prototype.draw = function () {\r\n      const x = Math.sin(this.timePassed) * this.orbitRadius + this.orbitX\r\n      const y = Math.cos(this.timePassed) * this.orbitRadius + this.orbitY\r\n      const twinkle = random(10)\r\n\r\n      if (twinkle === 1 && this.alpha > 0) {\r\n        this.alpha -= 0.05\r\n      } else if (twinkle === 2 && this.alpha < 1) {\r\n        this.alpha += 0.05\r\n      }\r\n\r\n      ctx.globalAlpha = this.alpha\r\n      ctx.drawImage(canvas2, x - this.radius / 2, y - this.radius / 2, this.radius, this.radius)\r\n      this.timePassed += this.speed\r\n    }\r\n\r\n    for (let i = 0; i < maxStars; i++) {\r\n      new Star()\r\n    }\r\n\r\n    function animation() {\r\n      ctx.globalCompositeOperation = 'source-over'\r\n      ctx.globalAlpha = 0.5\r\n      ctx.fillStyle = `hsla(${hue}, 64%, 6%, 2)`\r\n      ctx.fillRect(0, 0, w, h)\r\n\r\n      ctx.globalCompositeOperation = 'lighter'\r\n      for (let i = 1, l = stars.length; i < l; i++) {\r\n        stars[i].draw()\r\n      }\r\n\r\n      window.requestAnimationFrame(animation)\r\n    }\r\n\r\n    animation()\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.universe-bg {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n","import star from './src/star'\n\nstar.install = function (Vue) {\n  Vue.component(star.name, star)\n}\n\nexport default star\n"],"names":["props","width","type","Number","required","height","opacity","default","zIndex","data","canvasWidth","canvasHeight","created","window","innerWidth","innerHeight","mounted","$refs","universeDiv","style","canvas","ctx","getContext","w","h","hue","stars","count","maxStars","canvas2","document","createElement","ctx2","half","gradient2","createRadialGradient","addColorStop","fillStyle","beginPath","arc","Math","PI","fill","random","min","max","arguments","length","hold","floor","maxOrbit","x","y","diameter","round","sqrt","Star","orbitRadius","radius","orbitX","orbitY","timePassed","speed","alpha","prototype","draw","sin","cos","twinkle","globalAlpha","drawImage","i","animation","globalCompositeOperation","fillRect","l","requestAnimationFrame","star","install","Vue","component","name"],"mappings":"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"}