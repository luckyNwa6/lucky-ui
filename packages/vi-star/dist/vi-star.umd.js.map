{"version":3,"file":"vi-star.umd.js","sources":["../src/star.vue","../index.js"],"sourcesContent":["<template>\r\n  <div class=\"universe-bg\" ref=\"universeDiv\">\r\n    <canvas ref=\"canvas\" :width=\"canvasWidth\" :height=\"canvasHeight\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  //外部可以看情况传入  宽、高、透明度、层级\r\n  props: {\r\n    width: {\r\n      type: Number, // 数据类型为数组\r\n      required: false,\r\n      default: window.innerWidth // 设置默认值为\r\n    },\r\n    height: {\r\n      type: Number, // 数据类型为数组\r\n      required: false, // 传递\r\n      default: window.innerHeight // 设置默认值为\r\n    },\r\n    // 透明度\r\n    opacity: {\r\n      type: Number, // 数据类型为数组\r\n      required: false, // 传递\r\n      default: 0.4 // 设置默认值为\r\n    },\r\n    // z-index\r\n    zIndex: {\r\n      type: Number, // 数据类型为数组\r\n      required: false, // 传递\r\n      default: -1 // 设置默认值为-1\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      canvasWidth: '',\r\n      canvasHeight: ''\r\n    }\r\n  },\r\n  created() {\r\n    this.canvasWidth = this.width //这是canvas自带的宽高\r\n    this.canvasHeight = this.height\r\n  },\r\n  mounted() {\r\n    this.$refs.universeDiv.style.opacity = this.opacity\r\n    this.$refs.universeDiv.style['z-index'] = this.zIndex // 设置新的z-index值\r\n\r\n    const canvas = this.$refs.canvas\r\n    const ctx = canvas.getContext('2d')\r\n    const w = canvas.width\r\n    const h = canvas.height\r\n    const hue = 217\r\n    const stars = []\r\n    let count = 0\r\n    const maxStars = 1300\r\n\r\n    const canvas2 = document.createElement('canvas')\r\n    const ctx2 = canvas2.getContext('2d')\r\n    canvas2.width = 100\r\n    canvas2.height = 100\r\n    const half = canvas2.width / 2\r\n    const gradient2 = ctx2.createRadialGradient(half, half, 0, half, half, half)\r\n    gradient2.addColorStop(0.025, '#CCC')\r\n    gradient2.addColorStop(0.1, `hsl(${hue}, 61%, 33%)`)\r\n    gradient2.addColorStop(0.25, `hsl(${hue}, 64%, 6%)`)\r\n    gradient2.addColorStop(1, 'transparent')\r\n\r\n    ctx2.fillStyle = gradient2\r\n    ctx2.beginPath()\r\n    ctx2.arc(half, half, half, 0, Math.PI * 2)\r\n    ctx2.fill()\r\n\r\n    function random(min, max) {\r\n      if (arguments.length < 2) {\r\n        max = min\r\n        min = 0\r\n      }\r\n\r\n      if (min > max) {\r\n        let hold = max\r\n        max = min\r\n        min = hold\r\n      }\r\n\r\n      return Math.floor(Math.random() * (max - min + 1)) + min\r\n    }\r\n\r\n    function maxOrbit(x, y) {\r\n      const max = Math.max(x, y)\r\n      const diameter = Math.round(Math.sqrt(max * max + max * max))\r\n      return diameter / 2\r\n    }\r\n\r\n    const Star = function () {\r\n      this.orbitRadius = random(maxOrbit(w, h))\r\n      this.radius = random(60, this.orbitRadius) / 8\r\n      this.orbitX = w / 2\r\n      this.orbitY = h / 2\r\n      this.timePassed = random(0, maxStars)\r\n      this.speed = random(this.orbitRadius) / 1000000\r\n      this.alpha = random(2, 10) / 1000\r\n\r\n      count++\r\n      stars[count] = this\r\n    }\r\n\r\n    Star.prototype.draw = function () {\r\n      const x = Math.sin(this.timePassed) * this.orbitRadius + this.orbitX\r\n      const y = Math.cos(this.timePassed) * this.orbitRadius + this.orbitY\r\n      const twinkle = random(10)\r\n\r\n      if (twinkle === 1 && this.alpha > 0) {\r\n        this.alpha -= 0.05\r\n      } else if (twinkle === 2 && this.alpha < 1) {\r\n        this.alpha += 0.05\r\n      }\r\n\r\n      ctx.globalAlpha = this.alpha\r\n      ctx.drawImage(canvas2, x - this.radius / 2, y - this.radius / 2, this.radius, this.radius)\r\n      this.timePassed += this.speed\r\n    }\r\n\r\n    for (let i = 0; i < maxStars; i++) {\r\n      new Star()\r\n    }\r\n\r\n    function animation() {\r\n      ctx.globalCompositeOperation = 'source-over'\r\n      ctx.globalAlpha = 0.5\r\n      ctx.fillStyle = `hsla(${hue}, 64%, 6%, 2)`\r\n      ctx.fillRect(0, 0, w, h)\r\n\r\n      ctx.globalCompositeOperation = 'lighter'\r\n      for (let i = 1, l = stars.length; i < l; i++) {\r\n        stars[i].draw()\r\n      }\r\n\r\n      window.requestAnimationFrame(animation)\r\n    }\r\n\r\n    animation()\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.universe-bg {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n","import star from './src/star'\n\nstar.install = function (Vue) {\n  Vue.component(star.name, star)\n}\n\nexport default star\n"],"names":["props","width","type","Number","required","default","window","innerWidth","height","innerHeight","opacity","zIndex","data","canvasWidth","canvasHeight","created","mounted","$refs","universeDiv","style","canvas","ctx","getContext","w","h","hue","stars","count","maxStars","canvas2","document","createElement","ctx2","half","gradient2","createRadialGradient","addColorStop","fillStyle","beginPath","arc","Math","PI","fill","random","min","max","arguments","length","hold","floor","maxOrbit","x","y","diameter","round","sqrt","Star","orbitRadius","radius","orbitX","orbitY","timePassed","speed","alpha","prototype","draw","sin","cos","twinkle","globalAlpha","drawImage","i","animation","globalCompositeOperation","fillRect","l","requestAnimationFrame","star","install","Vue","component","name"],"mappings":"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"}