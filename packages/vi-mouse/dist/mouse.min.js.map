{"version":3,"file":"mouse.min.js","sources":["../src/mouse.vue","../index.js"],"sourcesContent":["<template>\r\n  <canvas ref=\"canvas\" style=\"position: absolute; left: 0; top: 0; pointer-events: none\"></canvas>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  mounted() {\r\n    this.initCanvas()\r\n    this.addEventListeners()\r\n    this.drawPointsInterval = setInterval(this.drawPoints, 20)\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.drawPointsInterval)\r\n    this.removeEventListeners()\r\n  },\r\n  methods: {\r\n    initCanvas() {\r\n      const canvas = this.$refs.canvas\r\n      const ctx = canvas.getContext('2d')\r\n      canvas.width = window.innerWidth\r\n      canvas.height = window.innerHeight\r\n      this.canvas = canvas\r\n      this.ctx = ctx\r\n    },\r\n    addEventListeners() {\r\n      window.addEventListener('mousemove', this.handleMouseMove)\r\n      window.addEventListener('click', this.handleMouseClick)\r\n    },\r\n    removeEventListeners() {\r\n      window.removeEventListener('mousemove', this.handleMouseMove)\r\n      window.removeEventListener('click', this.handleMouseClick)\r\n    },\r\n    handleMouseMove(evt) {\r\n      for (let i = 0; i < 15; i++) {\r\n        this.points.push({\r\n          sx: evt.x,\r\n          sy: evt.y,\r\n          vx: 0.5 - Math.random(),\r\n          vy: 0.5 - Math.random(),\r\n          life: this.live,\r\n          color: this.colors[parseInt(Math.random() * this.colors.length)],\r\n          size: Math.random() * 5\r\n        })\r\n      }\r\n    },\r\n    handleMouseClick(evt) {\r\n      this.clicks.push({\r\n        sx: evt.x,\r\n        sy: evt.y,\r\n        color: this.colors[parseInt(Math.random() * this.colors.length)],\r\n        life: this.live\r\n      })\r\n    },\r\n    drawPoints() {\r\n      const ctx = this.ctx\r\n      const canvas = this.canvas\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n\r\n      // 绘制粒子\r\n      for (let i = 0; i < this.points.length; i++) {\r\n        const point = this.points[i]\r\n        ctx.beginPath()\r\n        ctx.arc(point.sx, point.sy, point.size, Math.PI * 2, false)\r\n        ctx.fillStyle = `rgba(${point.color},${point.life / this.live})`\r\n        ctx.fill()\r\n        point.life--\r\n        if (point.life <= 0) {\r\n          this.points.splice(i, 1)\r\n        }\r\n        point.sx += point.vx * 3\r\n        point.sy += point.vy * 3\r\n      }\r\n\r\n      // 绘制点击效果\r\n      for (let i = 0; i < this.clicks.length; i++) {\r\n        const click = this.clicks[i]\r\n        ctx.beginPath()\r\n        ctx.arc(click.sx, click.sy, this.live - click.life, Math.PI * 2, false)\r\n        ctx.fillStyle = `rgba(${click.color},${click.life / this.live})`\r\n        ctx.fill()\r\n        click.life--\r\n        if (click.life <= 0) {\r\n          this.clicks.splice(i, 1)\r\n        }\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      canvas: null,\r\n      ctx: null,\r\n      points: [],\r\n      clicks: [],\r\n      live: 50,\r\n      colors: ['236, 204, 104', '255, 71, 87', '112, 161, 255', '123, 237, 159'],\r\n      drawPointsInterval: null\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mouse from './src/mouse'\n\nmouse.install = function (Vue) {\n  Vue.component(mouse.name, mouse)\n}\n\nexport default mouse\n"],"names":["__vue_script__","mounted","this","initCanvas","addEventListeners","drawPointsInterval","setInterval","drawPoints","beforeDestroy","clearInterval","removeEventListeners","methods","canvas","$refs","ctx","getContext","width","window","innerWidth","height","innerHeight","addEventListener","handleMouseMove","handleMouseClick","removeEventListener","evt","i","points","push","sx","x","sy","y","vx","Math","random","vy","life","live","color","colors","parseInt","length","size","clicks","clearRect","point","beginPath","arc","PI","fillStyle","fill","splice","click","data","mouse","install","Vue","component","name"],"mappings":"wzBAEA,MAAcA,EAGd,CACAC,UACAC,KAAAC,aACAD,KAAAE,oBACAF,KAAAG,mBAAAC,YAAAJ,KAAAK,WAAA,KAEAC,gBACAC,cAAAP,KAAAG,oBACAH,KAAAQ,wBAEAC,QAAA,CACAR,aACA,MAAAS,EAAAV,KAAAW,MAAAD,OACAE,EAAAF,EAAAG,WAAA,MACAH,EAAAI,MAAAC,OAAAC,WACAN,EAAAO,OAAAF,OAAAG,YACAlB,KAAAU,OAAAA,EACAV,KAAAY,IAAAA,GAEAV,oBACAa,OAAAI,iBAAA,YAAAnB,KAAAoB,iBACAL,OAAAI,iBAAA,QAAAnB,KAAAqB,mBAEAb,uBACAO,OAAAO,oBAAA,YAAAtB,KAAAoB,iBACAL,OAAAO,oBAAA,QAAAtB,KAAAqB,mBAEAD,gBAAAG,GACA,IAAA,IAAAC,EAAA,EAAAA,EAAA,GAAAA,IACAxB,KAAAyB,OAAAC,KAAA,CACAC,GAAAJ,EAAAK,EACAC,GAAAN,EAAAO,EACAC,GAAA,GAAAC,KAAAC,SACAC,GAAA,GAAAF,KAAAC,SACAE,KAAAnC,KAAAoC,KACAC,MAAArC,KAAAsC,OAAAC,SAAAP,KAAAC,SAAAjC,KAAAsC,OAAAE,SACAC,KAAA,EAAAT,KAAAC,YAIAZ,iBAAAE,GACAvB,KAAA0C,OAAAhB,KAAA,CACAC,GAAAJ,EAAAK,EACAC,GAAAN,EAAAO,EACAO,MAAArC,KAAAsC,OAAAC,SAAAP,KAAAC,SAAAjC,KAAAsC,OAAAE,SACAL,KAAAnC,KAAAoC,QAGA/B,aACA,MAAAO,EAAAZ,KAAAY,IACAF,EAAAV,KAAAU,OACAE,EAAA+B,UAAA,EAAA,EAAAjC,EAAAI,MAAAJ,EAAAO,QAGA,IAAA,IAAAO,EAAA,EAAAA,EAAAxB,KAAAyB,OAAAe,OAAAhB,IAAA,CACA,MAAAoB,EAAA5C,KAAAyB,OAAAD,GACAZ,EAAAiC,YACAjC,EAAAkC,IAAAF,EAAAjB,GAAAiB,EAAAf,GAAAe,EAAAH,KAAA,EAAAT,KAAAe,IAAA,GACAnC,EAAAoC,UAAA,QAAAJ,EAAAP,SAAAO,EAAAT,KAAAnC,KAAAoC,QACAxB,EAAAqC,OACAL,EAAAT,OACAS,EAAAT,MAAA,GACAnC,KAAAyB,OAAAyB,OAAA1B,EAAA,GAEAoB,EAAAjB,IAAA,EAAAiB,EAAAb,GACAa,EAAAf,IAAA,EAAAe,EAAAV,GAIA,IAAA,IAAAV,EAAA,EAAAA,EAAAxB,KAAA0C,OAAAF,OAAAhB,IAAA,CACA,MAAA2B,EAAAnD,KAAA0C,OAAAlB,GACAZ,EAAAiC,YACAjC,EAAAkC,IAAAK,EAAAxB,GAAAwB,EAAAtB,GAAA7B,KAAAoC,KAAAe,EAAAhB,KAAA,EAAAH,KAAAe,IAAA,GACAnC,EAAAoC,UAAA,QAAAG,EAAAd,SAAAc,EAAAhB,KAAAnC,KAAAoC,QACAxB,EAAAqC,OACAE,EAAAhB,OACAgB,EAAAhB,MAAA,GACAnC,KAAA0C,OAAAQ,OAAA1B,EAAA,MAKA4B,KAAAA,KACA,CACA1C,OAAA,KACAE,IAAA,KACAa,OAAA,GACAiB,OAAA,GACAN,KAAA,GACAE,OAAA,CAAA,gBAAA,cAAA,gBAAA,iBACAnC,mBAAA,sSC7FAkD,EAAMC,QAAU,SAAUC,GACxBA,EAAIC,UAAUH,EAAMI,KAAMJ"}