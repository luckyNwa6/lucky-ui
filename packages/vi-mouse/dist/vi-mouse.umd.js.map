{"version":3,"file":"vi-mouse.umd.js","sources":["../src/mouse.vue","../index.js"],"sourcesContent":["<template>\r\n  <canvas ref=\"canvas\" style=\"position: absolute; left: 0; top: 0; pointer-events: none\"></canvas>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  mounted() {\r\n    this.initCanvas()\r\n    this.addEventListeners()\r\n    this.drawPointsInterval = setInterval(this.drawPoints, 20)\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.drawPointsInterval)\r\n    this.removeEventListeners()\r\n  },\r\n  methods: {\r\n    initCanvas() {\r\n      const canvas = this.$refs.canvas\r\n      const ctx = canvas.getContext('2d')\r\n      canvas.width = window.innerWidth\r\n      canvas.height = window.innerHeight\r\n      this.canvas = canvas\r\n      this.ctx = ctx\r\n    },\r\n    addEventListeners() {\r\n      window.addEventListener('mousemove', this.handleMouseMove)\r\n      window.addEventListener('click', this.handleMouseClick)\r\n    },\r\n    removeEventListeners() {\r\n      window.removeEventListener('mousemove', this.handleMouseMove)\r\n      window.removeEventListener('click', this.handleMouseClick)\r\n    },\r\n    handleMouseMove(evt) {\r\n      for (let i = 0; i < 15; i++) {\r\n        this.points.push({\r\n          sx: evt.x,\r\n          sy: evt.y,\r\n          vx: 0.5 - Math.random(),\r\n          vy: 0.5 - Math.random(),\r\n          life: this.live,\r\n          color: this.colors[parseInt(Math.random() * this.colors.length)],\r\n          size: Math.random() * 5\r\n        })\r\n      }\r\n    },\r\n    handleMouseClick(evt) {\r\n      this.clicks.push({\r\n        sx: evt.x,\r\n        sy: evt.y,\r\n        color: this.colors[parseInt(Math.random() * this.colors.length)],\r\n        life: this.live\r\n      })\r\n    },\r\n    drawPoints() {\r\n      const ctx = this.ctx\r\n      const canvas = this.canvas\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n\r\n      // 绘制粒子\r\n      for (let i = 0; i < this.points.length; i++) {\r\n        const point = this.points[i]\r\n        ctx.beginPath()\r\n        ctx.arc(point.sx, point.sy, point.size, Math.PI * 2, false)\r\n        ctx.fillStyle = `rgba(${point.color},${point.life / this.live})`\r\n        ctx.fill()\r\n        point.life--\r\n        if (point.life <= 0) {\r\n          this.points.splice(i, 1)\r\n        }\r\n        point.sx += point.vx * 3\r\n        point.sy += point.vy * 3\r\n      }\r\n\r\n      // 绘制点击效果\r\n      for (let i = 0; i < this.clicks.length; i++) {\r\n        const click = this.clicks[i]\r\n        ctx.beginPath()\r\n        ctx.arc(click.sx, click.sy, this.live - click.life, Math.PI * 2, false)\r\n        ctx.fillStyle = `rgba(${click.color},${click.life / this.live})`\r\n        ctx.fill()\r\n        click.life--\r\n        if (click.life <= 0) {\r\n          this.clicks.splice(i, 1)\r\n        }\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      canvas: null,\r\n      ctx: null,\r\n      points: [],\r\n      clicks: [],\r\n      live: 50,\r\n      colors: ['236, 204, 104', '255, 71, 87', '112, 161, 255', '123, 237, 159'],\r\n      drawPointsInterval: null\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mouse from './src/mouse'\n\nmouse.install = function (Vue) {\n  Vue.component(mouse.name, mouse)\n}\n\nexport default mouse\n"],"names":["mounted","initCanvas","addEventListeners","drawPointsInterval","setInterval","drawPoints","beforeDestroy","clearInterval","removeEventListeners","methods","canvas","$refs","ctx","getContext","width","window","innerWidth","height","innerHeight","addEventListener","handleMouseMove","handleMouseClick","removeEventListener","evt","i","points","push","sx","x","sy","y","vx","Math","random","vy","life","live","color","colors","parseInt","length","size","clicks","clearRect","point","beginPath","arc","PI","fillStyle","fill","splice","click","data","mouse","install","Vue","component","name"],"mappings":";;;;;;;;;;;AAKA,eAAA;EACAA,EAAAA,OAAAA,GAAA;MACA,IAAA,CAAAC,UAAA,EAAA,CAAA;MACA,IAAA,CAAAC,iBAAA,EAAA,CAAA;MACA,IAAA,CAAAC,kBAAA,GAAAC,WAAA,CAAA,IAAA,CAAAC,UAAA,EAAA,EAAA,CAAA,CAAA;KACA;EACAC,EAAAA,aAAAA,GAAA;EACAC,IAAAA,aAAA,CAAA,IAAA,CAAAJ,kBAAA,CAAA,CAAA;MACA,IAAA,CAAAK,oBAAA,EAAA,CAAA;KACA;EACAC,EAAAA,OAAA,EAAA;EACAR,IAAAA,UAAAA,GAAA;EACA,MAAA,MAAAS,MAAA,GAAA,IAAA,CAAAC,KAAA,CAAAD,MAAA,CAAA;EACA,MAAA,MAAAE,GAAA,GAAAF,MAAA,CAAAG,UAAA,CAAA,IAAA,CAAA,CAAA;EACAH,MAAAA,MAAA,CAAAI,KAAA,GAAAC,MAAA,CAAAC,UAAA,CAAA;EACAN,MAAAA,MAAA,CAAAO,MAAA,GAAAF,MAAA,CAAAG,WAAA,CAAA;QACA,IAAA,CAAAR,MAAA,GAAAA,MAAA,CAAA;QACA,IAAA,CAAAE,GAAA,GAAAA,GAAA,CAAA;OACA;EACAV,IAAAA,iBAAAA,GAAA;QACAa,MAAA,CAAAI,gBAAA,CAAA,WAAA,EAAA,IAAA,CAAAC,eAAA,CAAA,CAAA;QACAL,MAAA,CAAAI,gBAAA,CAAA,OAAA,EAAA,IAAA,CAAAE,gBAAA,CAAA,CAAA;OACA;EACAb,IAAAA,oBAAAA,GAAA;QACAO,MAAA,CAAAO,mBAAA,CAAA,WAAA,EAAA,IAAA,CAAAF,eAAA,CAAA,CAAA;QACAL,MAAA,CAAAO,mBAAA,CAAA,OAAA,EAAA,IAAA,CAAAD,gBAAA,CAAA,CAAA;OACA;MACAD,eAAAA,CAAAG,GAAA,EAAA;QACA,KAAA,IAAAC,CAAA,GAAA,CAAA,EAAAA,CAAA,GAAA,EAAA,EAAAA,CAAA,EAAA,EAAA;EACA,QAAA,IAAA,CAAAC,MAAA,CAAAC,IAAA,CAAA;YACAC,EAAA,EAAAJ,GAAA,CAAAK,CAAA;YACAC,EAAA,EAAAN,GAAA,CAAAO,CAAA;EACAC,UAAAA,EAAA,EAAA,GAAA,GAAAC,IAAA,CAAAC,MAAA,EAAA;EACAC,UAAAA,EAAA,EAAA,GAAA,GAAAF,IAAA,CAAAC,MAAA,EAAA;YACAE,IAAA,EAAA,IAAA,CAAAC,IAAA;EACAC,UAAAA,KAAA,EAAA,IAAA,CAAAC,MAAA,CAAAC,QAAA,CAAAP,IAAA,CAAAC,MAAA,EAAA,GAAA,IAAA,CAAAK,MAAA,CAAAE,MAAA,CAAA,CAAA;EACAC,UAAAA,IAAA,EAAAT,IAAA,CAAAC,MAAA,EAAA,GAAA,CAAA;EACA,SAAA,CAAA,CAAA;EACA,OAAA;OACA;MACAZ,gBAAAA,CAAAE,GAAA,EAAA;EACA,MAAA,IAAA,CAAAmB,MAAA,CAAAhB,IAAA,CAAA;UACAC,EAAA,EAAAJ,GAAA,CAAAK,CAAA;UACAC,EAAA,EAAAN,GAAA,CAAAO,CAAA;EACAO,QAAAA,KAAA,EAAA,IAAA,CAAAC,MAAA,CAAAC,QAAA,CAAAP,IAAA,CAAAC,MAAA,EAAA,GAAA,IAAA,CAAAK,MAAA,CAAAE,MAAA,CAAA,CAAA;UACAL,IAAA,EAAA,IAAA,CAAAC,IAAAA;EACA,OAAA,CAAA,CAAA;OACA;EACA/B,IAAAA,UAAAA,GAAA;EACA,MAAA,MAAAO,GAAA,GAAA,IAAA,CAAAA,GAAA,CAAA;EACA,MAAA,MAAAF,MAAA,GAAA,IAAA,CAAAA,MAAA,CAAA;EACAE,MAAAA,GAAA,CAAA+B,SAAA,CAAA,CAAA,EAAA,CAAA,EAAAjC,MAAA,CAAAI,KAAA,EAAAJ,MAAA,CAAAO,MAAA,CAAA,CAAA;;EAEA;EACA,MAAA,KAAA,IAAAO,CAAA,GAAA,CAAA,EAAAA,CAAA,GAAA,IAAA,CAAAC,MAAA,CAAAe,MAAA,EAAAhB,CAAA,EAAA,EAAA;EACA,QAAA,MAAAoB,KAAA,GAAA,IAAA,CAAAnB,MAAA,CAAAD,CAAA,CAAA,CAAA;UACAZ,GAAA,CAAAiC,SAAA,EAAA,CAAA;UACAjC,GAAA,CAAAkC,GAAA,CAAAF,KAAA,CAAAjB,EAAA,EAAAiB,KAAA,CAAAf,EAAA,EAAAe,KAAA,CAAAH,IAAA,EAAAT,IAAA,CAAAe,EAAA,GAAA,CAAA,EAAA,KAAA,CAAA,CAAA;EACAnC,QAAAA,GAAA,CAAAoC,SAAA,GAAA,CAAA,KAAA,EAAAJ,KAAA,CAAAP,KAAA,CAAAO,CAAAA,EAAAA,KAAA,CAAAT,IAAA,GAAA,IAAA,CAAAC,IAAA,CAAA,CAAA,CAAA,CAAA;UACAxB,GAAA,CAAAqC,IAAA,EAAA,CAAA;UACAL,KAAA,CAAAT,IAAA,EAAA,CAAA;EACA,QAAA,IAAAS,KAAA,CAAAT,IAAA,IAAA,CAAA,EAAA;YACA,IAAA,CAAAV,MAAA,CAAAyB,MAAA,CAAA1B,CAAA,EAAA,CAAA,CAAA,CAAA;EACA,SAAA;EACAoB,QAAAA,KAAA,CAAAjB,EAAA,IAAAiB,KAAA,CAAAb,EAAA,GAAA,CAAA,CAAA;EACAa,QAAAA,KAAA,CAAAf,EAAA,IAAAe,KAAA,CAAAV,EAAA,GAAA,CAAA,CAAA;EACA,OAAA;;EAEA;EACA,MAAA,KAAA,IAAAV,CAAA,GAAA,CAAA,EAAAA,CAAA,GAAA,IAAA,CAAAkB,MAAA,CAAAF,MAAA,EAAAhB,CAAA,EAAA,EAAA;EACA,QAAA,MAAA2B,KAAA,GAAA,IAAA,CAAAT,MAAA,CAAAlB,CAAA,CAAA,CAAA;UACAZ,GAAA,CAAAiC,SAAA,EAAA,CAAA;UACAjC,GAAA,CAAAkC,GAAA,CAAAK,KAAA,CAAAxB,EAAA,EAAAwB,KAAA,CAAAtB,EAAA,EAAA,IAAA,CAAAO,IAAA,GAAAe,KAAA,CAAAhB,IAAA,EAAAH,IAAA,CAAAe,EAAA,GAAA,CAAA,EAAA,KAAA,CAAA,CAAA;EACAnC,QAAAA,GAAA,CAAAoC,SAAA,GAAA,CAAA,KAAA,EAAAG,KAAA,CAAAd,KAAA,CAAAc,CAAAA,EAAAA,KAAA,CAAAhB,IAAA,GAAA,IAAA,CAAAC,IAAA,CAAA,CAAA,CAAA,CAAA;UACAxB,GAAA,CAAAqC,IAAA,EAAA,CAAA;UACAE,KAAA,CAAAhB,IAAA,EAAA,CAAA;EACA,QAAA,IAAAgB,KAAA,CAAAhB,IAAA,IAAA,CAAA,EAAA;YACA,IAAA,CAAAO,MAAA,CAAAQ,MAAA,CAAA1B,CAAA,EAAA,CAAA,CAAA,CAAA;EACA,SAAA;EACA,OAAA;EACA,KAAA;KACA;EACA4B,EAAAA,IAAAA,GAAA;MACA,OAAA;EACA1C,MAAAA,MAAA,EAAA,IAAA;EACAE,MAAAA,GAAA,EAAA,IAAA;EACAa,MAAAA,MAAA,EAAA,EAAA;EACAiB,MAAAA,MAAA,EAAA,EAAA;EACAN,MAAAA,IAAA,EAAA,EAAA;QACAE,MAAA,EAAA,CAAA,eAAA,EAAA,aAAA,EAAA,eAAA,EAAA,eAAA,CAAA;EACAnC,MAAAA,kBAAA,EAAA,IAAA;OACA,CAAA;EACA,GAAA;EACA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAhGA,MAAc,cAAA,GAAA,OAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAdkD,mBAAK,CAACC,OAAO,GAAG,UAAUC,GAAG,EAAE;IAC7BA,GAAG,CAACC,SAAS,CAACH,iBAAK,CAACI,IAAI,EAAEJ,iBAAK,CAAC,CAAA;EAClC,CAAC;;;;;;;;;;"}